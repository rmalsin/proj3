def reversePicture():
  revFile=pickAFile()
  revPict=makePicture(revFile)
  width=getWidth(revPict)
  height=getHeight(revPict)
  makeRevPic=makeEmptyPicture(width,height)
  #Now, do the actual copying
  for x in range(0, width):
    for y in range(0, height):
      color=getColor(getPixel(revPict, x, y))
      setColor(getPixel(makeRevPic,width-x-1, y),color)
  show(revPict)
  show(makeRevPic)
  return makeRevPic  
  
def blurredPicture():
  blurFile=pickAFile()
  blurPict=makePicture(blurFile)
  width=getWidth(blurPict)
  height=getHeight(blurPict)
  makeBlurPic=makeEmptyPicture(width-10,height)
  for px in getPixels(makeBlurPic):
    x=getX(px)
    y=getY(px)
    if (x+10<width):
      rTotal=0
      gTotal=0
      bTotal=0
      for i in range(0,10):
         origpx=getPixel(blurPict,x+i,y)
         rTotal=rTotal+getRed(origpx)
         gTotal=gTotal+getGreen(origpx)
         bTotal=bTotal+getBlue(origpx)
      rAverage=(rTotal/10)
      gAverage=(gTotal/10)
      bAverage=(bTotal/10)
      setRed(px,rAverage)
      setGreen(px,gAverage)
      setBlue(px,bAverage)
  show(blurPict)
  show(makeBlurPic)
  return makeBlurPic
  
def fadedPicture():    
  fadeFile=pickAFile()
  fadePict=makePicture(fadeFile)
  width=getWidth(fadePict)
  height=getHeight(fadePict)
  makeFadedPic=makeEmptyPicture(width,height)
  show(fadePict)
  for px in getPixels(fadePict):
    newRed = (255*.3) + (getRed(px)*(.7))
    newGreen = (255*.3) + (getGreen(px)*(.7))
    newBlue = (255*.3) + (getBlue(px)*(.7))
    setColor(px, makeColor(newRed, newGreen, newBlue))
  for x in range(0, width):
    for y in range(0, height):
      color=getColor(getPixel(fadePict, x, y))
      setColor(getPixel(makeFadedPic,x, y),color)
  show(makeFadedPic)
  return makeFadedPic

def greyscalePicture():    
  greyFile=pickAFile()
  greyPict=makePicture(greyFile)
  width=getWidth(greyPict)
  height=getHeight(greyPict)
  makeGreyPic=makeEmptyPicture(width,height)
  show(greyPict)
  for px in getPixels(greyPict):
    greyRed=getRed(px)*0.299
    greyGreen=getGreen(px)*0.587
    greyBlue=getBlue(px)*0.114
    greyColor=greyRed + greyGreen + greyBlue
    setColor(px, makeColor(greyColor, greyColor, greyColor))
  for x in range(0, width):
    for y in range(0, height):
      color=getColor(getPixel(greyPict, x, y))
      setColor(getPixel(makeGreyPic,x, y),color)
  show(makeGreyPic)
  return makeGreyPic

def negativePicture():    
  negFile=pickAFile()
  negPict=makePicture(negFile)
  width=getWidth(negPict)
  height=getHeight(negPict)
  makeNegPic=makeEmptyPicture(width,height)
  show(negPict)
  for px in getPixels(negPict):
    red=getRed(px)
    green=getGreen(px)
    blue=getBlue(px)
    setColor (px, makeColor(255-red, 255-green, 255-blue))
  for x in range(0, width):
    for y in range(0, height):
      color=getColor(getPixel(negPict, x, y))
      setColor(getPixel(makeNegPic,x, y),color)
  show(makeNegPic)
  return makeNegPic
  
def blackWhitePicture():    
  bwFile=pickAFile()
  bwPict=makePicture(bwFile)
  width=getWidth(bwPict)
  height=getHeight(bwPict)
  makeBlackWhitePic=makeEmptyPicture(width,height)
  show(bwPict)
  for px in getPixels(bwPict):
    red=getRed(px)
    green=getGreen(px)
    blue=getBlue(px)
    bwIndicator=((red+blue+green)/3)
    if bwIndicator > 127:
      setColor (px, makeColor(white))
    else:
      setColor (px, makeColor(black))
  for x in range(0, width):
    for y in range(0, height):
      color=getColor(getPixel(bwPict, x, y))
      setColor(getPixel(makeBlackWhitePic,x, y),color)
  show(makeBlackWhitePic)
  return makeBlackWhitePic
  
def edgeDetection():
  edgeFile=pickAFile()
  edgePict=makePicture(edgeFile)
  width=getWidth(edgePict)
  height=getHeight(edgePict)
  makeEdgePic=makeEmptyPicture(width,height)
  for x in range(0, width):
    for y in range(0, height):
      color=getColor(getPixel(edgePict, x, y))
      setColor(getPixel(makeEdgePic,x, y),color)
  show(edgePict)
  for x in range(0, width-1):
    for y in range(0, height-1):
      px = getPixel(makeEdgePic, x, y)
      right = getPixel(makeEdgePic, x + 1, y)
      below = getPixel(makeEdgePic, x, y + 1)
      luminance=lambda px: (getRed(px)*0.299)+(getGreen(px)*0.587)+(getBlue(px)*0.114)
      lumOverall=luminance(px)
      lumRight=luminance(right)
      lumBelow=luminance(below)
      if abs(lumRight-lumOverall) > 5 and abs(lumBelow-lumOverall) > 5:
        setColor(px, black)
      else:
        setColor(px, white)
  show(makeEdgePic)
  return makeEdgePic  